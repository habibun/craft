{#{% extends '::base.html.twig' %}

{% block title %}State-Overview{% endblock %}#}

{% block body %}
<div class="row">
        <div class="state-overview">
            <div class="col-lg-3 col-sm-6">
                {% for entity in totalUser %}
                    <section class="panel">
                        <div class="symbol terques">
                            <i class="icon-user"></i>
                        </div>
                        <div class="value">
                            <h1 class="count">
                                0
                            </h1>

                            <p>Total Users</p>
                        </div>
                    </section>
                {% endfor %}
            </div>
        </div>

    {% if draftedPurchase is not empty %}
        <div class="state-overview">
            <div class="col-lg-3 col-sm-6">
                {% for entity in draftedPurchase %}
                    <section class="panel">
                        <div class="symbol yellow">
                            <i class="icon-shopping-cart"></i>
                        </div>
                        <div class="value">
                            <h1 class=" count3">
                                0
                            </h1>

                            <p>Drafted Purchase</p>
                        </div>
                    </section>
                {% endfor %}
            </div>
        </div>
    {% endif %}

	{% if draftedIssue is not empty %}
        <div class="state-overview">
            <div class="col-lg-3 col-sm-6">
                {% for entity in draftedIssue %}
                    <section class="panel">
                        <div class="symbol red">
                            <i class="icon-move"></i>
                        </div>
                        <div class="value">
                            <h1 class=" count2">
                                0
                            </h1>

                            <p>Drafted Issue</p>
                        </div>
                    </section>
                {% endfor %}
            </div>
        </div>
    {% endif %}    

    {% if totalCost is not empty %}
        <div class="state-overview">
            <div class="col-lg-3 col-sm-6">
                <section class="panel">
                        <div class="symbol blue">
                            <i class="icon-shopping-cart"></i>
                        </div>
                        <div class="value">
                            <h1 class="count4">
                                <small>
                                    0
                                </small>
                            </h1>
                            <p>Total Purchase Cost</p>
                        </div>
                </section>
            </div>
        </div>
    {% endif %}

</div>
{% endblock %}

{% block javascripts %}
	<script src="{{ asset('js/jquery.js') }}"></script>
	<script type="text/javascript">

		var us = {{ totalUser.total_user }};
        function countUp(count) {
            var div_by = 100,
                    speed = Math.round(count / div_by),
                    $display = $('.count'),
                    run_count = 1,
                    int_speed = 24;

            var int = setInterval(function () {
                if (run_count < div_by) {
                    $display.text(speed * run_count);
                    run_count++;
                } else if (parseInt($display.text()) < count) {
                    var curr_count = parseInt($display.text()) + 1;
                    $display.text(curr_count);
                } else {
                    clearInterval(int);
                }
            }, int_speed);
        }
        countUp(us);

    	var tc = {{ totalCost.total_price }};
        function countUp4(count) {
            var div_by = 1000,
                    speed = Math.round(count / div_by),
                    $display = $('.count4'),
                    run_count = 1,
                    int_speed = -2;

            var int = setInterval(function () {
                if (run_count < div_by) {
                    $display.text(speed * run_count);
                    run_count++;
                } else if (parseInt($display.text()) < count) {
                    var curr_count = parseInt($display.text()) + 1;
                    $display.text(curr_count);
                } else {
                    clearInterval(int);
                }
            }, int_speed);
        }
        countUp4(tc);


        var dp = {{ draftedPurchase.total_drafted_purchase }};
        function countUp3(count) {
            var div_by = 100,
                    speed = Math.round(count / div_by),
                    $display = $('.count3'),
                    run_count = 1,
                    int_speed = 24;

            var int = setInterval(function () {
                if (run_count < div_by) {
                    $display.text(speed * run_count);
                    run_count++;
                } else if (parseInt($display.text()) < count) {
                    var curr_count = parseInt($display.text()) + 1;
                    $display.text(curr_count);
                } else {
                    clearInterval(int);
                }
            }, int_speed);
        }
        countUp3(dp);


        var di = {{ draftedIssue.total_drafted_issue }};
        function countUp2(count) {
            var div_by = 100,
                    speed = Math.round(count / div_by),
                    $display = $('.count2'),
                    run_count = 1,
                    int_speed = 24;

            var int = setInterval(function () {
                if (run_count < div_by) {
                    $display.text(speed * run_count);
                    run_count++;
                } else if (parseInt($display.text()) < count) {
                    var curr_count = parseInt($display.text()) + 1;
                    $display.text(curr_count);
                } else {
                    clearInterval(int);
                }
            }, int_speed);
        }
        countUp2(di);

	</script>
{% endblock %}
